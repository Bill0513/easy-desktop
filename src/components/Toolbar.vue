<script setup lang="ts">
import { useDesktopStore } from '@/stores/desktop'
import SearchBar from './SearchBar.vue'

const store = useDesktopStore()

// æ·»åŠ ç»„ä»¶çš„å¿«æ·æ–¹å¼
const addWidget = (type: string) => {
  store.createWidget({ type: type as any })
}
</script>

<template>
  <div class="fixed top-4 left-1/2 -translate-x-1/2 z-50">
    <div class="card-hand-drawn px-4 py-2 flex items-center gap-2">
      <!-- ä¾¿ç­¾ -->
      <button
        class="p-2 hover:bg-muted/50 rounded-lg transition-colors group flex flex-col items-center gap-0.5"
        title="æ·»åŠ ä¾¿ç­¾"
        @click="addWidget('note')"
      >
        <span class="text-2xl group-hover:scale-110 transition-transform">ğŸ“</span>
        <span class="text-[10px] font-handwritten text-pencil/60">ä¾¿ç­¾</span>
      </button>

      <!-- å¾…åŠ -->
      <button
        class="p-2 hover:bg-muted/50 rounded-lg transition-colors group flex flex-col items-center gap-0.5"
        title="æ·»åŠ å¾…åŠ"
        @click="addWidget('todo')"
      >
        <span class="text-2xl group-hover:scale-110 transition-transform">âœ…</span>
        <span class="text-[10px] font-handwritten text-pencil/60">å¾…åŠ</span>
      </button>

      <!-- æ–‡æœ¬ -->
      <button
        class="p-2 hover:bg-muted/50 rounded-lg transition-colors group flex flex-col items-center gap-0.5"
        title="æ·»åŠ æ–‡æœ¬"
        @click="addWidget('text')"
      >
        <span class="text-2xl group-hover:scale-110 transition-transform">ğŸ“‹</span>
        <span class="text-[10px] font-handwritten text-pencil/60">æ–‡æœ¬</span>
      </button>

      <!-- Markdown -->
      <button
        class="p-2 hover:bg-muted/50 rounded-lg transition-colors group flex flex-col items-center gap-0.5"
        title="æ·»åŠ Markdown"
        @click="addWidget('markdown')"
      >
        <span class="text-2xl group-hover:scale-110 transition-transform">ğŸ“</span>
        <span class="text-[10px] font-handwritten text-pencil/60">Markdown</span>
      </button>

      <!-- å›¾ç‰‡ -->
      <button
        class="p-2 hover:bg-muted/50 rounded-lg transition-colors group flex flex-col items-center gap-0.5"
        title="æ·»åŠ å›¾ç‰‡"
        @click="addWidget('image')"
      >
        <span class="text-2xl group-hover:scale-110 transition-transform">ğŸ–¼ï¸</span>
        <span class="text-[10px] font-handwritten text-pencil/60">å›¾ç‰‡</span>
      </button>

      <!-- åˆ†éš”çº¿ -->
      <div class="w-px h-8 bg-pencil/20 mx-2"></div>

      <!-- æœç´¢æ  -->
      <SearchBar class="w-[380px]" />
    </div>
  </div>
</template>
