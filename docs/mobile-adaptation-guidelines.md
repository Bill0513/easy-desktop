# 移动端适配规范（统一风格基线）

本文档用于沉淀当前项目移动端适配的方向、规则与实现方案，供后续人工开发或大模型继续适配时复用，确保风格和交互一致。

## 1. 目标与范围

### 1.1 目标
- 在不破坏桌面端体验的前提下，建立移动端可高频使用的交互框架。
- 保持视觉风格连续（手绘设计语言），但降低移动端操作成本。
- 让后续页面适配可以按统一模板推进。

### 1.2 当前已落地（记录页）
- 移动端底部 Tab 导航。
- 移动端右下角双按钮：新增组件、最小化组件。
- 记录页卡片化展示（替代自由拖拽画布）。
- 最小化弹窗按分类手风琴展示。
- 最小化恢复后自动定位并高亮 3 秒。
- 组件展开互斥：同一时间仅允许一个组件展开。

### 1.3 后续适配范围
- `navigation`、`news`、`file`、`mindmap` 四个 Tab 的移动交互与布局。

## 2. 统一适配原则

### 2.1 布局原则
- 移动端断点：`<= 768px`。
- 顶部信息栏固定，底部导航固定，中间内容滚动。
- 所有页面必须预留底部安全区，避免内容被底部 Tab 遮挡。
- 关键操作入口必须常驻可见（不要只依赖悬浮态）。

### 2.2 交互原则
- 移动端不依赖 `hover` 完成关键操作。
- 尽量避免复杂手势并发，优先明确点击路径。
- 同类状态尽量互斥，避免用户同时管理多个展开面板。
- 关闭弹层后若触发页面变更，应自动定位结果并给短时视觉反馈。

### 2.3 视觉原则
- 保留手绘风字体和色彩体系。
- 移动端弱化大面积手绘边框的堆叠感，优先信息密度与可读性。
- 空状态需要“插图 + 文案”，不能只放单行文本。
- 高亮反馈持续时间控制在 2-3 秒，避免持续干扰。

## 3. 记录页可复用方案

### 3.1 顶层结构
- 顶部固定条（标题 + 同步状态 + 同步按钮，整体高度 < 80px）。
- 内容区卡片列表（可滚动）。
- 右下角操作区（新增 + 最小化管理）。
- 底部固定 Tab。

### 3.2 状态管理建议（Store）
- 移动端独立布局状态：
  - `mobileWidgetOrder`：移动端卡片顺序。
  - `mobileCollapsedWidgets`：移动端折叠状态。
  - `mobileFocusTarget`：跨组件恢复定位信号。
- 提供明确 action：
  - 排序更新。
  - 折叠切换与互斥展开。
  - 恢复组件后的定位通知。

### 3.3 行为规则（已验证）
- 组件最小化时：先折叠，再最小化。
- 从最小化列表恢复时：
  - 自动关闭弹窗。
  - 自动展开目标组件。
  - 自动折叠其他组件。
  - 自动滚动到目标并高亮 3 秒。

## 4. 后续 Tab 的适配模板

以下模板用于后续四个 Tab 统一推进。

### 4.1 页面骨架
- 固定顶部信息栏（页面标题 + 关键状态/关键操作）。
- 主内容区单列优先，必要时双列（平板）。
- 弹层优先底部抽屉或全屏层，避免桌面式右键菜单。

### 4.2 交互迁移
- 右键菜单 -> 长按动作面板 / 显式“更多”按钮。
- 悬停说明 -> 可点击提示或二级面板。
- 多按钮稀疏布局 -> 分组工具栏 + 二级菜单。

### 4.3 文件/导航类页面建议
- 列表项的核心操作收敛为：打开、编辑、删除、移动。
- 高风险操作（删除/覆盖）保持二次确认。
- 上传/导入统一改为明显的主按钮入口。

## 5. 大模型协作提示词模板

可将下面内容作为后续适配任务的前置提示：

```text
你在适配 easy-desktop 的移动端页面。请严格遵循 docs/mobile-adaptation-guidelines.md。
要求：
1) 保持顶部固定栏 + 底部固定 Tab 的壳层结构；
2) 不使用依赖 hover 的关键交互；
3) 所有弹层改为移动端可触达形式（抽屉/全屏）；
4) 保持手绘风语言一致，但优先信息密度和可读性；
5) 完成后给出：改动文件、交互变化、回归风险、验证步骤。
```

## 6. 验收清单（每个 Tab 适配后都要过）
- 390x844 下可完整操作主流程。
- 顶部栏与底部栏不遮挡核心内容。
- 所有关键操作可在 2 次点击内到达。
- 空状态有插图与引导文案。
- 动作触发后有可感知反馈（滚动定位/高亮/toast）。
- 桌面端既有行为不回归。
