# AI 投资助手开发任务追踪

## 项目概述
使用 Cloudflare Workers AI 对金融新闻进行智能分析，为 A 股投资者提供有价值的投资洞察。

## 开发阶段

### 阶段一：基础架构搭建 ✅ 进行中
- [ ] 1.1 添加 AI 投资助手 Tab
  - [ ] 更新 TabType 类型定义
  - [ ] 在 App.vue 中添加路由
  - [ ] 在 TabBar.vue 中添加图标
  - [ ] 创建 AIInvestmentPage.vue 组件
- [ ] 1.2 设计数据结构
  - [ ] 定义 AI 分析结果接口
  - [ ] 定义板块分析接口
  - [ ] 定义投资洞察接口
- [ ] 1.3 创建 Cloudflare Workers AI API
  - [ ] 创建 /api/ai-analysis.ts 端点
  - [ ] 配置 Workers AI 绑定

### 阶段二：第一层 - 新闻筛选与提炼
- [ ] 2.1 实现新闻收集
  - [ ] 从金融新闻源获取最近 24 小时新闻
  - [ ] 新闻去重逻辑
- [ ] 2.2 AI 新闻筛选
  - [ ] 设计 Prompt：判断是否与 A 股相关
  - [ ] 提取关键信息（行业、公司、政策）
  - [ ] 评估新闻重要性（1-10 分）
  - [ ] 识别新闻情绪（利好/利空/中性）
- [ ] 2.3 存储筛选结果
  - [ ] D1 数据库表设计
  - [ ] 存储原始新闻和分析结果

### 阶段三：第二层 - 板块分析
- [ ] 3.1 板块识别
  - [ ] 定义 A 股主要板块列表
  - [ ] AI 识别新闻涉及的板块
- [ ] 3.2 板块热度统计
  - [ ] 统计板块被提及次数
  - [ ] 计算正面新闻占比
  - [ ] 生成板块热度分数
- [ ] 3.3 板块影响分析
  - [ ] 分析对板块的影响（短期/中期/长期）
  - [ ] 识别板块间关联性

### 阶段四：第三层 - 投资洞察生成
- [ ] 4.1 市场要闻摘要
  - [ ] AI 生成今日核心要闻（3-5 条）
- [ ] 4.2 板块分析报告
  - [ ] 识别热门板块（基于热度和情绪）
  - [ ] 分析潜力板块（政策支持、趋势）
  - [ ] 提示风险板块（负面新闻集中）
- [ ] 4.3 关注事件提醒
  - [ ] 识别即将发布的重要数据/会议/政策

### 阶段五：前端展示
- [ ] 5.1 今日要闻卡片
  - [ ] 展示 3-5 条核心新闻
  - [ ] 显示重要性和情绪标签
- [ ] 5.2 板块热力图
  - [ ] 可视化展示各板块热度
  - [ ] 颜色编码（红色=热门，绿色=潜力，灰色=冷门）
- [ ] 5.3 AI 洞察面板
  - [ ] 🔥 热门板块卡片
  - [ ] 💎 潜力板块卡片
  - [ ] ⚠️ 风险提示卡片
  - [ ] 📅 明日关注卡片
- [ ] 5.4 历史趋势图表
  - [ ] 板块热度变化曲线
  - [ ] 市场情绪指数

### 阶段六：优化与增强
- [ ] 6.1 缓存策略
  - [ ] KV 缓存 AI 分析结果（1-4 小时）
  - [ ] 批量处理（每小时聚合）
- [ ] 6.2 成本控制
  - [ ] 使用小模型进行初筛
  - [ ] 使用大模型进行深度分析
  - [ ] 限制每日 AI 调用次数
- [ ] 6.3 增强功能
  - [ ] 市场情绪指数
  - [ ] 政策追踪专区
  - [ ] 历史准确性回测

## 技术栈
- **前端**: Vue 3 + TypeScript
- **AI**: Cloudflare Workers AI (@cf/meta/llama-3.1-8b-instruct)
- **存储**: D1 (新闻和分析结果) + KV (缓存) + R2 (历史数据)
- **数据源**: 雪球、金十数据、格隆汇、快讯牛、市场快讯、华尔街见闻、36氪

## A 股主要板块列表
1. 新能源（光伏、风电、储能、新能源汽车）
2. 半导体/芯片
3. 人工智能/大模型
4. 医药/医疗器械
5. 消费（白酒、食品饮料、家电）
6. 房地产/建筑
7. 金融（银行、保险、券商）
8. 军工/国防
9. 有色金属/矿产
10. 化工/材料
11. 机械/制造
12. 通信/5G
13. 互联网/传媒
14. 农业/种植
15. 环保/公用事业

## Prompt 设计参考

### 新闻筛选 Prompt
```
你是一位专业的 A 股投资分析师。请分析以下新闻是否与 A 股市场相关，并提取关键信息。

新闻标题：{title}
新闻链接：{url}

请以 JSON 格式返回：
{
  "relevant": true/false,  // 是否与 A 股相关
  "importance": 1-10,      // 重要性评分
  "sentiment": "positive/negative/neutral",  // 情绪
  "sectors": ["板块1", "板块2"],  // 涉及的板块
  "keywords": ["关键词1", "关键词2"],  // 关键词
  "summary": "一句话总结"  // 核心内容
}
```

### 投资洞察 Prompt
```
你是一位资深的 A 股投资顾问。基于以下 24 小时内的新闻分析数据，生成投资洞察报告。

数据：{analysis_data}

请生成：
1. 今日市场要闻（3-5 条核心新闻）
2. 热门板块（基于新闻热度和正面情绪）
3. 潜力板块（政策支持、行业趋势）
4. 风险提示（负面新闻集中的板块）
5. 明日关注（即将发布的重要事件）

注意：仅供参考，不构成投资建议。
```

## 当前进度
- ✅ 已添加 6 个金融新闻源
- 🔄 准备开始阶段一：基础架构搭建

## 下一步行动
1. 添加 AI 投资助手 Tab
2. 创建基础页面组件
3. 设计数据结构
